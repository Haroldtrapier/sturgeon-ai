(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{9722:function(e,s,t){Promise.resolve().then(t.bind(t,1690))},1690:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var r=t(7437),a=t(2265),n=t(4033),l=t(6932),o=t(2601);let d=(0,l.eI)(o.env.NEXT_PUBLIC_SUPABASE_URL,o.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);function i(){let e=(0,n.useRouter)(),[s,t]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[i,u]=(0,a.useState)(null),[c,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{var e;let s=window.location.hash;if(!s){u("Invalid or expired reset link.");return}let t=new URLSearchParams(s.substring(1)),r=t.get("access_token"),a=null!==(e=t.get("refresh_token"))&&void 0!==e?e:"";if(!r){u("Invalid or expired reset link.");return}d.auth.setSession({access_token:r,refresh_token:a}).then(e=>{let{error:s}=e;s?(console.error("setSession error",s),u("Your reset link is invalid or has expired.")):f(!0)})},[]);let b=async t=>{if(t.preventDefault(),u(null),m(null),!p){u("Reset session is not ready. Try the link again from your email.");return}if(!s||s.length<6){u("Password must be at least 6 characters.");return}if(s!==l){u("Passwords do not match.");return}h(!0);let{error:r}=await d.auth.updateUser({password:s});if(h(!1),r){console.error("updateUser error",r),u(r.message||"Failed to update password.");return}m("Password updated successfully. Redirecting to login..."),setTimeout(()=>{e.push("/login")},2e3)};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-6 shadow-xl",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-white mb-2",children:"Reset your password"}),(0,r.jsx)("p",{className:"text-sm text-slate-300 mb-4",children:"Enter a new password for your Sturgeon AI account."}),i&&(0,r.jsx)("div",{className:"mb-3 rounded-md bg-red-900/40 border border-red-500 px-3 py-2 text-sm text-red-100",children:i}),c&&(0,r.jsx)("div",{className:"mb-3 rounded-md bg-emerald-900/40 border border-emerald-500 px-3 py-2 text-sm text-emerald-100",children:c}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"New password"}),(0,r.jsx)("input",{type:"password",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-500",value:s,onChange:e=>t(e.target.value),required:!0,minLength:6})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Confirm new password"}),(0,r.jsx)("input",{type:"password",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-500",value:l,onChange:e=>o(e.target.value),required:!0,minLength:6})]}),(0,r.jsx)("button",{type:"submit",disabled:x||!p,className:"w-full rounded-md bg-emerald-500 hover:bg-emerald-400 disabled:bg-slate-600 text-slate-950 font-medium py-2 text-sm transition",children:x?"Updatingâ€¦":"Update password"})]}),(0,r.jsxs)("p",{className:"mt-4 text-xs text-slate-400",children:["If this link doesn't work, request a new reset link from the"," ",(0,r.jsx)("a",{href:"/forgot-password",className:"text-emerald-400 underline",children:"Forgot password"})," ","page."]})]})})}},4033:function(e,s,t){e.exports=t(94)}},function(e){e.O(0,[652,932,971,472,744],function(){return e(e.s=9722)}),_N_E=e.O()}]);